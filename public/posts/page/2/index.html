<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Posts - CURDer</title><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "CURDer",
    
    "url": "https:\/\/youkele.github.io\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/youkele.github.io\/"
  
  
  
  
}
</script>

<meta property="og:title" content="Posts" />
<meta property="og:url" content="https://youkele.github.io/posts/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="CURDer" />

  <meta name="twitter:title" content="Posts" />
  <meta name="twitter:card" content="summary" />
  <meta name="generator" content="Hugo 0.99.1" />
  <link rel="alternate" href="https://youkele.github.io/index.xml" type="application/rss+xml" title="CURDer"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://youkele.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="https://youkele.github.io/css/syntax.css" /><link rel="stylesheet" href="https://youkele.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://youkele.github.io/">CURDer</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        

        

        
      </ul>
    </div>

    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="posts-heading">
              
                <h1>Posts</h1>
              
              
                <hr class="small">
              
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
  <div class="container" role="main">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        
        <div class="posts-list">
          
            <article class="post-preview">
    <a href="https://youkele.github.io/posts/%E7%94%B1js%E7%B2%BE%E5%BA%A6%E7%BC%BA%E5%A4%B1%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98%E5%8F%8A%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/">
        <h2 class="post-title">由js精度缺失引发的问题及处理方法</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on November 18, 2018
  
  
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        问题场景 在使用java的Long类型过程中,当这个Long类型数值超过 1^0+1^1+1^2+...1^58的范围后就会引发精度丢失, 详见JS[IEEE754规范](https://en.wikipedia.org/wiki/IEEE_754) 常见的现象就是比如:1000967854800048128,通过js转换成Number类型成为了:1000967854800048100, 由此会引发一系列问题,比如当年著名的爱国者导弹. 因为精度缺失造成问题,大多数情况发生在前后端交互过程中,那么下面就分别说说处理方法  普通场景的处理方法  简单的处理方法，jackson,gson等json工具包已经包含了Long类型处理方法了,基本上都是转String.
 gson处理方法 GsonBuilder builder = new GsonBuilder(); //默认将所有的Long转换成String builder.setLongSerializationPolicy(LongSerializationPolicy.STRING);  jackson处理方法 ObjectMapper objectMapper = new ObjectMapper(); SimpleModule module = new SimpleModule(); module.addSerializer(Long.class, ToStringSerializer.instance); module.addSerializer(Long.TYPE, ToStringSerializer.instance);  高级场景处理  为了避免将其他无需转换成String的Long类型转换,这里提供一个高级的用法， 思路很简单就是定义一个Id类型,通过实现Id类型的序列化和反序列化功能即可进行实现. 下面就用Gson和jackson来演示
 核心代码  //Gson GsonBuilder builder = new GsonBuilder(); builder.registerTypeAdapter(Id.class, (JsonSerializer&lt;Id&gt;) (src, typeOfSrc, context) -&gt; new JsonPrimitive(src.getVal())); builder.registerTypeAdapter(Id.class, (JsonDeserializer&lt;Id&gt;) (json, typeOfT, context) -&gt; new Id(json.getAsLong())); Gson gson = builder.
        <a href="https://youkele.github.io/posts/%E7%94%B1js%E7%B2%BE%E5%BA%A6%E7%BC%BA%E5%A4%B1%E5%BC%95%E5%8F%91%E7%9A%84%E9%97%AE%E9%A2%98%E5%8F%8A%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95/" class="post-read-more">[Read More]</a>
        
    </div>

    

</article>
          
            <article class="post-preview">
    <a href="https://youkele.github.io/posts/gitlab%E5%92%8Cdocker%E5%AE%9E%E8%B7%B5%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/">
        <h2 class="post-title">Gitlab和Docker实践持续集成</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on August 29, 2018
  
  
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        前言  本文面向那些每次发包,都是本地构建,通过奇慢无比的网络进行上传,一旦打包出错(or 没有fix bug)，还需要重新上传,无穷无尽的任务还在等着,而此刻网络成了瓶颈。又或者此刻测试人员正在测试,而你停了服务,造成测试工作无法进行,此刻的你已经是万人瞩目了,测试、项目经理已经磨刀霍霍了.就问你慌不慌?
 打包  上面说的情况其实是程序发版,说到发版目前各个系统程序交付形式有大概分为这些: windows常见的zip,rar,msi等; Linux常见的rpm,deb等; mac常见的dmg等;java语言的有jar,war包等; 然而多种的打包形式,依赖的环境不一样,每种包也只能是在特定的环境下才能使用,这其实对运维也是一种挑战. 那么有没有一种包是各个平台都可以用，而且不用去关心目标机器环境的呢? 答案就是: docker,下面我们就结合docker,进行自动化打包, 缩短各个职能间沟通的成本.
 Docker  玩过docker的人都知道,这玩意真心好,都不用为环境操心了, 运维也只需要关心namespace和cgroups就好了，不用在去管什么rpm包,deb包,tar.gz扽等了。
 使用工具 Gitlab: 代码仓库, 构建工具(pipeline) Nexus: maven仓库, docker register (新版Gitlab已经包含Registery) Docker: 容器 Webhook: 自己写的 [Github] (https://github.com/youkale/gitlab-webhook)  基本流程  3 +-----------------------------+ | | | | +---------+ 1 +------v-------+ +--------+------+ | | | | 2 | | | Coder +---------&gt; Gitlab +------------&gt; Gitlab Runner | | | | | | | +---------+ +---^----+-----+ +--------+------+ | | | | | | | | +-----------------+ | 4 | | | | | | | | Docker Registry &lt;------+ | | | | | 5| +-------^---------+ 7| | | | | | 6 | | +-------+---------+ | | | | | +--&gt; Target Server | | | | | +-------+---------+ | | +---------------+ 1.
        <a href="https://youkele.github.io/posts/gitlab%E5%92%8Cdocker%E5%AE%9E%E8%B7%B5%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/" class="post-read-more">[Read More]</a>
        
    </div>

    

</article>
          
            <article class="post-preview">
    <a href="https://youkele.github.io/posts/intellij-idea%E7%9A%84tips%E8%B4%BC%E5%A5%BD%E7%94%A8/">
        <h2 class="post-title">IntelliJ IDEA的Tips贼好用</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on August 26, 2018
  
  
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        废话  IntelliJ IDEA功能强大,用过得到的朋友也都知道,可能你认为一个新的工具同样的也会带来相应的学习成本。其实没有想象的那么复杂，只要关心idea给你提示的黄色警告即可， 然后用 alt + enter 使用更好的方式重构即可. 本文没有上面实质内容，只是在安利大家用IDEA, 把代码写好，少加班
 Lambda 转换前
ExecutorService executorService = Executors.newCachedThreadPool(); executorService.submit(new Runnable() { @Override public void run() { System.out.println(&quot;xxx&quot;); } });  转换后
public void runJob() { ExecutorService executorService = Executors.newCachedThreadPool(); executorService.submit(() -&gt; System.out.println(&quot;xxx&quot;)); }  Stream 转换前
public boolean contains(List&lt;Person&gt; ps) { return ps.stream().filter(s -&gt; s.getName().equals(&quot;youkale&quot;)).findAny().isPresent(); }  转换后
public boolean contains(List&lt;Person&gt; ps) { return ps.stream().anyMatch(s -&gt; s.getName().equals(&quot;youkale&quot;)); }  异常 转换前
        <a href="https://youkele.github.io/posts/intellij-idea%E7%9A%84tips%E8%B4%BC%E5%A5%BD%E7%94%A8/" class="post-read-more">[Read More]</a>
        
    </div>

    

</article>
          
            <article class="post-preview">
    <a href="https://youkele.github.io/posts/vim-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
        <h2 class="post-title">vim 学习笔记(持续更新)</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on August 24, 2018
  
  
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        <h1 id="vim学习笔记">Vim学习笔记</h1>
<blockquote>
<p>几乎每次管理服务器的时候或多或少得接触到vim，一直都觉得他很复杂，只会简单的打开文件，修改，保存, 终于在最近项目不太忙的时候，沉寂心来认真学习了一把，收益还是蛮大的，出乎意料得高效. 其实认真学起来vim不是想象中的那么难.只是要多练习就好. 于是乎我把学习的笔记整理了一下，发出来，以后有学到新姿势也更新上来.</p>
</blockquote>
<h2 id="操作说明约定">操作说明约定</h2>
<pre><code>&lt;num&gt; :  表示数字
&lt;char&gt; : 表示字符
&lt;C&gt; : 表示control键
{} : 表示可选择
</code></pre>
<h2 id="命令行">命令行</h2>
<pre><code>set nu: 显示行号
set relativenumber: 显示相对行号
</code></pre>
<h2 id="单词操作">单词操作</h2>
<pre><code>w: 下一个单词首部
b: 上一个单词首部
e: 下一个单词尾部
</code></pre>
<h2 id="光标移动">光标移动</h2>
<pre><code>h: 左下上右
^: 光标移动到行首非空白字符
0: 光标移动到行首
$: 光标移动到行尾
g: 光标移动到行尾非空白字符处
&lt;: x次 左下上右移动
&lt;: 到x行首
g: 到第一行
G: 到行尾
): 下一个句子
(: 上一个句子
M: 光标移动到屏幕中央
H: 光标移动到屏幕上方
L: 光标移动到屏幕下方
z: 当前行移动到屏幕中央
z: 当前行移动到屏幕上方
z: 当前行移动到屏幕下方
f: 光标移动到下一个&lt;char&gt;处
&lt;: 光标移动到第&lt;num&gt;个字符
t: 光标移动到下一个&lt;char&gt;左侧
&lt;: 光标移动到第&lt;num&gt;个&lt;char&gt;左侧
%: 切换到下一个 {,[,( 处
{: 向{下，上}查找当前光标单词
</code></pre>
<h2 id="行为">行为</h2>
<pre><code>r: 替换当前字符
x: 删除当前光标字符
s: 类似x,进入编辑模式
c: 剪切操作，并进入编辑模式
v: 行内选择
d: 删除操作
y: 复制
p: 粘帖
g: 搜索(不一定正确)
</code></pre>
<h2 id="组合动作">组合动作</h2>
<pre><code>行为 + 次数(可以省略) + 范围描述 + 文本对象
行为:  d,c,y,v等
范围描述：i,a,t,f
文本对象:
p: 段落
s: 句子
w: 单词
t: tag
举例:

ve 选择到单词结尾
vf2: 当前位置查找到第二个&quot;:&quot;
cw 剪切当前单词
dt: 从当前位置删除到&quot;:&quot;
gd 跳转掉变量定义
gUe 当前位置到单词结尾转化为小写,同样适用于w,b
gue 当前位置到单词结尾转化为小写
gUU 当前行转换为大写
guu 当前行转换为小写
</code></pre>
<h2 id="宏">宏</h2>
<pre><code>录制: 使用qa,定义名字为a的宏(存放的寄存器)，接下来可以录入一些操作，录入完成后，按q结束
回放: 1@a ,表示回放1次, @@ 回放最新录制的宏
</code></pre>
<h2 id="窗口操作">窗口操作</h2>
<pre><code>:split: 水平分割
:vsplit: 垂直分割
&lt;C-w&gt;{hjkl}: 窗口切换
&lt;C-w&gt;{-,+,_}: 缩小,放大,最大
</code></pre>

        
    </div>

    

</article>
          
            <article class="post-preview">
    <a href="https://youkele.github.io/posts/redis-distributed-lock/">
        <h2 class="post-title">重谈redis分布式锁</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on August 12, 2018
  
  
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        前言 Redis分布式锁其实网上已经一大把了，我写这篇博客的目的是想发表下自己的浅见。
我们知道在单进程中，通过语言内置的锁可以保证数据的一致性，随着软件的不断扩大，很多应用已经是多进程的方式部署,那么为了保证数据的一致性,我们需要一个分布式锁。标题说的是Redis分布式锁，那么我下面主要讲的rendis锁，而且不会涉及到redis单点故障的问题。
常见的分布锁 搜索一下常见的分布式锁说的都是通过redis和zookeeper来实现。
  redis
 setnx 通过设置一个共有的key，而且通过设置过期时间来避免死锁
   zk
 通过设置一个共有的节点,通过zk的watch,观察节点的变化进行通知
   锁的需求   独占: 一个时间点只能一个线程访问
  可重入: 同一个线程只要当前持有锁，可以重复进入
  避免死锁: 多个线程访问不会出现死锁的情况
  锁释放: 进程故障能自动释放锁，只有持有锁的进程能释放锁
  尝试自己实现一个  实现 copy from importnew Redis 分布式锁的正确实现方式（ Java 版 ）
 public class RedisTool {   private static final String LOCK_SUCCESS = &#34;OK&#34;;  private static final String SET_IF_NOT_EXIST = &#34;NX&#34;;  private static final String SET_WITH_EXPIRE_TIME = &#34;PX&#34;;   public static boolean tryGetDistributedLock(Jedis jedis, String lockKey, String requestId, int expireTime) {   String result = jedis.
        <a href="https://youkele.github.io/posts/redis-distributed-lock/" class="post-read-more">[Read More]</a>
        
    </div>

    

</article>
          
            <article class="post-preview">
    <a href="https://youkele.github.io/posts/url-value-cast-struct/">
        <h2 class="post-title">url.Values转换struct</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on January 13, 2018
  
  
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        前言 大家在写golang http服务的时候或许会碰到Request中url.Values转换成struct的需要。
思路 翻开net.url查看url.Values的定义
type Values map[string][]string  那么我是不是可以通过遍历struct的Field获取对应的数据类型，以及通过tag来从url.Values中获取对应的参数？ 答案是可以的，那么我们就开动吧。
  先来定义一个struct,还有一个叫param的tag。  type User struct {  UserId int `param:&#34;user_id,100&#34; }  struct说明  字段名: UserId url.Values中的字段名: user_id 默认值: 100  实现   typ := val.Type() 	for i := 0; i &lt; val.NumField(); i++ { 	kt := typ.Field(i) //获取字段类型 	tag := kt.Tag.Get(&#34;param&#34;) //获取tag  sv := val.Field(i) //获取字段值 	uv := getVal(values, tag) //获取默认值  switch sv.
        <a href="https://youkele.github.io/posts/url-value-cast-struct/" class="post-read-more">[Read More]</a>
        
    </div>

    

</article>
          
            <article class="post-preview">
    <a href="https://youkele.github.io/posts/array-memory-allocation/">
        <h2 class="post-title">数组内存分配</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on May 20, 2017
  
  
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        废话 今天是所谓的520，高富帅此刻正在xxx，我等屌丝在写博客，悲哀呀。。
如题  //定义一个容量为5,长度为4的数组 slice := [5]int{10, 20, 30, 40} //cap = 5 - 1 //len = 3 -1 //一个新的切片 newSlice := slice[1:3] //增加两个元素 //这些操作其实是在原有的数组上进行操作 //因为cap都在这个原有的数组范围内 newSlice = append(newSlice, 50, 60) fmt.Printf(&#34;slice cap %d len %d, newSlice cap %d len %d \n&#34;, cap(slice), len(slice), cap(newSlice), len(newSlice)) //遍历并打印出指针地址 for i1, v1 := range slice { fmt.Println(i1, v1, &amp;slice[i1]) } fmt.Printf(&#34;slice cap %d len %d, newSlice cap %d len %d \n&#34;, cap(slice), len(slice), cap(newSlice), len(newSlice)) //遍历并打印出指针地址 for i2, v2 := range newSlice { fmt.
        <a href="https://youkele.github.io/posts/array-memory-allocation/" class="post-read-more">[Read More]</a>
        
    </div>

    

</article>
          
            <article class="post-preview">
    <a href="https://youkele.github.io/posts/jetty-embedded-development-path-problem/">
        <h2 class="post-title">Jetty嵌入开发路径问题</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on October 28, 2016
  
  
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        我都知道在使用jetty在嵌入开发的时候使用ContextHandler，通过 setContextPath设置访问路径，通过setHandler来使用自定义的handler.最终设置到Server中，服务就可以跑起来了。
 官方的栗子  Server server = new Server(8080); ContextHandler context = new ContextHandler(&#34;/&#34;); context.setContextPath(&#34;/&#34;); context.setHandler(new HelloHandler(&#34;Root Hello&#34;)); ContextHandler contextFR = new ContextHandler(&#34;/fr&#34;); contextFR.setHandler(new HelloHandler(&#34;Bonjoir&#34;)); ContextHandler contextIT = new ContextHandler(&#34;/it&#34;); contextIT.setHandler(new HelloHandler(&#34;Bongiorno&#34;)); ContextHandler contextV = new ContextHandler(&#34;/&#34;); contextV.setVirtualHosts(new String[] { &#34;127.0.0.2&#34; }); contextV.setHandler(new HelloHandler(&#34;Virtual Hello&#34;)); contextV.setInitParameter(&#34;dirAllowed&#34;, &#34;false&#34;); ContextHandlerCollection contexts = new ContextHandlerCollection(); contexts.setHandlers(new Handler[] { context, contextFR, contextIT, contextV }); server.setHandler(contexts); server.start(); server.join(); 开始 细心的朋友可能在使用中发现，明明我定义的路径是/user ,但是在访问的时候却进行了一次302跳转，然后最终变成了/user/ ,经过调试发现,在ContextHandler这个类中发现下面这个有趣的问题
 // Are we not the root context?
        <a href="https://youkele.github.io/posts/jetty-embedded-development-path-problem/" class="post-read-more">[Read More]</a>
        
    </div>

    

</article>
          
            <article class="post-preview">
    <a href="https://youkele.github.io/posts/openwrt-dns/">
        <h2 class="post-title">openwrt简单的dns方案</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on October 3, 2016
  
  
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        准备  环境   NETGEAR WNDR3700v4  OpenWrt Chaos Calmer 15.05.1 / LuCI 15.05-149-g0d8bbd2 Release (git-15.363.78009-956be55) 准备软件   dnscrypt-proxy 安装 dnscrypt-proxy $ opkg update $ opkg install dnscrypt-proxy 简单不？
配置/etc/config/dnscrypt-proxy config dnscrypt-proxy 	option address &#39;127.0.0.1&#39; 	option port &#39;5553&#39; 	# option resolver &#39;opendns&#39; 	option resolvers_list &#39;/usr/share/dnscrypt-proxy/dnscrypt-resolvers.csv&#39; 开机运行&amp;启动
/etc/init.d/dnscrypt-proxy enable /etc/init.d/dnscrypt-proxy start  一般openwrt 会使用dnsmasq作为dns和dhcp服务，所以这里也得该 编辑/etc/config/dhcp
 config dnsmasq 	option domainneeded &#39;1&#39; 	option boguspriv &#39;1&#39; 	option filterwin2k &#39;1&#39; 	option localise_queries &#39;1&#39; 	option rebind_protection &#39;1&#39; 	option rebind_localhost &#39;1&#39; 	option local &#39;/lan/&#39; 	option domain &#39;lan&#39; 	option expandhosts &#39;1&#39; 	option nonegcache &#39;0&#39; 	option authoritative &#39;1&#39; 	option readethers &#39;1&#39; 	option leasefile &#39;/tmp/dhcp.
        <a href="https://youkele.github.io/posts/openwrt-dns/" class="post-read-more">[Read More]</a>
        
    </div>

    

</article>
          
            <article class="post-preview">
    <a href="https://youkele.github.io/posts/fans-mall-user-relation/">
        <h2 class="post-title">微商锁粉重构思路</h2>
        
        
        
    </a>

    <p class="post-meta">
        <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on August 12, 2016
  
  
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;
    
  
  
</span>


    </p>
    <div class="post-entry">
        
        项目背景 ​	通过分享链接到朋友圈、微信群进行锁粉，当被锁粉对象消费后，会通过比例返佣给分享链接的用户。
问题描述 ​	点击链接进入的用户，因为业务处理过长，出现响应超时情况，导致系统吞吐量过低、甚至出现点击链接后用户锁粉失败的情况。
业务分析 调用步骤:
 需要获取微信用户信息。 计算上级用户的粉丝数量。 同时统计当天新增用户。 微信头像会过期，需要将图片同步到对象存储。 &hellip;.  非业务分析 高性能 ​	按照目前用户新增的速度来看，每秒TPS大约在15。
​	用户获取信息相关QPS大约为500。
高可用 ​	用户在分享链接时候不允许出现点击锁定粉失败。
​	同时在运营后台需要得知当天新增用户。
可扩展性 支持水平扩展。
评估结果   功能性：解决业务发展带来的系统耦合、迭代缓慢问题。
  非功能性：要解决系统新增用户的高可用、查询用户的高性能。
   通过经验值计算高峰时期= 平时峰值 * 4，来计算新增与查询用户性能指标:
  新增用户(TPS) * 4 = 60 ， 采用异步形式MQ(Kafka,rabbitMQ)/Redis(pub/sub,lpush/rpop)/JVM+Mysql进行处理。 查询用户(QPS) * 4 = 2000，qps不高，可以通过通过水平部署2台避免单点。  技术实现考量 异步
 Kafka集群，支持高可用:  生产者：可用通过ack参数来确定消息推送集群各个broker中的副本。每个topic可以配置副本数量。 消费者：可以通过扩展分区进行多消费者进行消费，并且可以在在业务完成后提交事物。同样的消息即使消费后，也可以通过修改group-id进行重复消费。   Redis哨兵，支持高可用 JVM队列，不支持高可用  保障100%不丢消息：
        <a href="https://youkele.github.io/posts/fans-mall-user-relation/" class="post-read-more">[Read More]</a>
        
    </div>

    

</article>
          
        </div>
        
          <ul class="pager main-pager">
            
              <li class="previous">
                <a href="https://youkele.github.io/posts/page/1/">&larr; Newer Posts</a>
              </li>
            
            
              <li class="next">
                <a href="https://youkele.github.io/posts/page/3/">Older Posts &rarr;</a>
              </li>
            
          </ul>
        
      </div>
    </div>
  </div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
        </ul>
        <p class="credits copyright text-muted">
          

          &nbsp;&bull;&nbsp;&copy;
          
            2021
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://youkele.github.io/">CURDer</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.99.1</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://youkele.github.io/js/main.js"></script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://youkele.github.io/js/load-photoswipe.js"></script>









    
  </body>
</html>

